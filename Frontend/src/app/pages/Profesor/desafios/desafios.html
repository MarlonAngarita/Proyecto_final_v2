<section class="contenedor-desafios">
<!-- TÃ­tulo de la secciÃ³n de creaciÃ³n -->
 <div class="encabezado-logo"> 
    <h2>Crear nuevo desafÃ­o</h2>
    <img src="/assets/Logo.png" alt="Logo" class="logo-proyecto"/>
    <button class="btn-volver-desafios" (click)="volverAlDashboard()">â Volver</button>
 </div>

  <!-- Formulario para crear un nuevo desafÃ­o -->
  <form (submit)="crearDesafio()" class="formulario-desafio">
    <label>
      TÃ­tulo:
      <input
        type="text"
        [(ngModel)]="nuevoDesafio.titulo"
        name="titulo"
        required
      />
    </label>

    <label>
      DescripciÃ³n:
      <textarea
        [(ngModel)]="nuevoDesafio.descripcion"
        name="descripcion"
      ></textarea>
    </label>

    <label>
      Nivel:
      <select [(ngModel)]="nuevoDesafio.nivel" name="nivel">
        <option value="bÃ¡sico">BÃ¡sico</option>
        <option value="intermedio">Intermedio</option>
        <option value="avanzado">Avanzado</option>
      </select>
    </label>

    <label>
      Activo:
      <input type="checkbox" [(ngModel)]="nuevoDesafio.activo" name="activo" />
    </label>

    <button type="submit">Agregar desafÃ­o</button>
  </form>

  <!-- TÃ­tulo de la lista de desafÃ­os -->
  <h2>Lista de desafÃ­os creados</h2>

  <!-- Tabla que lista todos los desafÃ­os creados -->
  <table class="tabla-desafios">
    <thead>
      <tr>
        <th>TÃ­tulo</th>
        <th>Nivel</th>
        <th>Activo</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let desafio of desafios">
        <td>{{ desafio.titulo }}</td>
        <td>{{ desafio.nivel }}</td>
        <td>{{ desafio.activo ? 'âœ…' : 'âŒ' }}</td>
        <td>
          <button (click)="editarDesafio(desafio)">âœï¸</button>
          <button (click)="eliminarDesafio(desafio)">ğŸ—‘ï¸</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal para editar un desafÃ­o existente -->
  <div class="modal" *ngIf="desafioEditando">
    <div class="modal-contenido">
      <h3>Editar desafÃ­o</h3>

      <div class="campo">
        <label>TÃ­tulo:</label>
        <input type="text" [(ngModel)]="desafioEditando.titulo" />
      </div>

      <div class="campo">
        <label>DescripciÃ³n:</label>
        <textarea [(ngModel)]="desafioEditando.descripcion"></textarea>
      </div>

      <div class="campo">
        <label>Nivel:</label>
        <select [(ngModel)]="desafioEditando.nivel">
          <option value="bÃ¡sico">BÃ¡sico</option>
          <option value="intermedio">Intermedio</option>
          <option value="avanzado">Avanzado</option>
        </select>
      </div>

      <label>
        <input type="checkbox" [(ngModel)]="desafioEditando.activo" />
        Activo
      </label>

      <div class="acciones-modal">
        <button (click)="guardarEdicion()">Guardar</button>
        <button (click)="cancelarEdicion()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Modal de confirmaciÃ³n para eliminar -->
  <div class="modal" *ngIf="desafioEliminar">
    <div class="modal-contenido">
      <h3>Â¿Eliminar desafÃ­o?</h3>
      <p>
        Â¿EstÃ¡s segura de eliminar <strong>{{ desafioEliminar.titulo }}</strong>?
      </p>
      <div class="acciones-modal">
        <button (click)="confirmarEliminar()">SÃ­, eliminar</button>
        <button (click)="cancelarEliminar()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Submodal con mensaje de confirmaciÃ³n general -->
  <div class="submodal" *ngIf="mensajeConfirmacion">
    <div class="submodal-contenido">
      <p>{{ mensajeConfirmacion }}</p>
      <button (click)="cerrarConfirmacion()">Cerrar</button>
    </div>
  </div>
</section>
